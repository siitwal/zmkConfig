// ╔═════════════════════════════════════════════════════════════╗
// ║															 ║
// ║     ██████╗██╗██╗████████╗ ██╗       ██╗ █████╗ ██╗         ║
// ║    ██╔════╝██║██║╚══██╔══╝ ██║  ██╗  ██║██╔══██╗██║         ║
// ║    ╚█████╗ ██║██║   ██║    ╚██╗████╗██╔╝███████║██║         ║
// ║     ╚═══██╗██║██║   ██║     ████╔═████║ ██╔══██║██║         ║
// ║    ██████╔╝██║██║   ██║     ╚██╔╝ ╚██╔╝ ██║  ██║███████╗    ║
// ║    ╚═════╝ ╚═╝╚═╝   ╚═╝      ╚═╝   ╚═╝  ╚═╝  ╚═╝╚══════╝    ║
// ║															 ║
// ╚═════════════════════════════════════════════════════════════╝


#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/ext_power.h>
#include <dt-bindings/zmk/outputs.h>


&soft_off {
	hold-time-ms = <2000>; 
};
&caps_word { continue-list = <BACKSPACE DELETE>; };


/ {
	behaviors {
        td_scw: tap_dance_shift_caps_word {
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <200>;
            bindings = <&sk LSHFT>, <&caps_word>;
        };
		td_ccs: tap_dance_ctrl_ctrl_shift {
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <200>;
            bindings = <&kp LCTRL>, <&sk LC(LSHFT)>;
        };
		grdel: grave_delete {
            compatible = "zmk,behavior-mod-morph";
            #binding-cells = <0>;
            bindings = <&kp BSPC>, <&kp DELETE>;
            mods = <(MOD_LSFT)>;
        };
    };
	keymap {
		compatible = "zmk,keymap";
		default_layer {
// DONE
// ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
// ║																							                ║
// ║   ┌───────┬───────┬───────┬───────┬───────┬───────┐    ┌───────┬───────┬───────┬───────┬───────┬───────┐   ║     
// ║   │  ESC  │   Q   │   W   │   E   │   R   │   T   │    │   Y   │   U   │   I   │   O   │   P   │  DEL  │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │  GUI  │   A   │   S   │   D   │   F   │   G   │    │   H   │   J   │   K   │   L   │   ;   │   '   │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │  SCW  │   Z   │   X   │   C   │   V   │   B   │    │   N   │   M   │   ,   │   .   │   /   │  SL3  │   ║
// ║   └───────┴───────┴───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┴───────┴───────┘   ║
// ║                           │  ML2  │  ML1  │  SPC  │    │  ENT  │  CCS  │  ALT  │					        ║
// ║       	     		       └───────┴───────┴───────┘    └───────┴───────┴───────┘                           ║
// ║																											║
// ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

			bindings = <
				&kp ESC   &kp Q &kp W &kp E &kp R   &kp T    &kp Y &kp U  &kp I     &kp O   &kp P    &grdel
				&kp LGUI  &kp A &kp S &kp D &kp F   &kp G    &kp H &kp J  &kp K     &kp L   &kp SEMI &kp SQT
				&td_scw   &kp Z &kp X &kp C &kp V   &kp B    &kp N &kp M  &kp COMMA &kp DOT &kp FSLH &sl 3
							        &mo 2 &mo 1 &kp SPACE    &kp RET &td_ccs &kp LALT
			>;
		};


		lower_layer {
// DONE
// ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
// ║					     																	                ║
// ║   ┌───────┬───────┬───────┬───────┬───────┬───────┐    ┌───────┬───────┬───────┬───────┬───────┬───────┐   ║
// ║   │  ESC  │   1   │   2   │   3   │   4   │   5   │    │   6   │   7   │   8   │   9   │   0   │  BSPC │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │  GUI  │ PSCRN │       │       │  TAB  │  TL4  │    │  LFT  │  DOWN │   UP  │  RGT  │       │       │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │ SHIFT │       │  TL5  │       │       │ CAPS  │    │  HOME │ PG_DN │ PG_UP │  END  │       │       │   ║
// ║   └───────────────────────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┴───────┴───────┘   ║
// ║                           │       │  ML1  │  SPC  │    │  ENT  │  CTRL │  ALT  │					        ║
// ║		     		       └───────┴───────┴───────┘    └───────┴───────┴───────┘                           ║
// ║																							                ║
// ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

			bindings = <
				&kp ESC   &kp N1    &kp N2 &kp N3 &kp N4   &kp N5       &kp N6   &kp N7    &kp N8    &kp N9    &kp N0 &kp BSPC
				&kp LGUI  &kp PSCRN &none  &none  &kp TAB  &none        &kp LEFT &kp DOWN  &kp UP    &kp RIGHT &none  &none
				&kp LSHFT &none     &tog 5 &none  &none    &kp CAPS     &kp HOME &kp PG_DN &kp PG_UP &kp END   &none  &none
							                  &none &mo 1 &kp SPACE     &kp RET  &kp LCTRL &kp LALT
			>;
		};


		rise_layer {
// DONE
// ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
// ║																						                    ║
// ║   ┌───────┬───────┬───────┬───────┬───────┬───────┐    ┌───────┬───────┬───────┬───────┬───────┬───────┐   ║
// ║   │  ESC  │   !   │   @   │   #   │   $   │   %   │    │   ^   │   &   │   (   │   )   │   *   │  BSPC │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │  GUI  │       │       │       │       │       │    │   -   │   =   │   [   │   ]   │   \   │   `   │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │ SHIFT │       │       │       │       │       │    │   _   │   +   │   {   │   }   │   |   │   ~   │   ║
// ║   └───────┴───────┴───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┴───────┴───────┘   ║
// ║                           │  ML2  │       │  SPC  │    │  ENT  │  CTRL │  ALT  │					        ║
// ║   		     		       └───────┴───────┴───────┘    └───────┴───────┴───────┘                           ║
// ║																						                    ║
// ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

			bindings = <
				&kp ESC   &kp EXCL &kp AT &kp HASH &kp DLLR &kp PRCNT     &kp CARET &kp AMPS  &kp LPAR &kp RPAR &kp STAR &kp BSPC
				&kp LGUI  &none    &none  &none    &none    &none         &kp MINUS &kp EQUAL &kp LBKT &kp RBKT &kp BSLH &kp GRAVE
				&kp LSHFT &none    &none  &none    &none    &none         &kp UNDER &kp PLUS  &kp LBRC &kp RBRC &kp PIPE &kp TILDE
					                            &mo 2 &none &kp SPACE     &kp RET &kp LCTRL &kp LALT
			>;
		};

		fn_layer {
// DONE 
// ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
// ║									  								                                        ║
// ║   ┌───────┬───────┬───────┬───────┬───────┬───────┐    ┌───────┬───────┬───────┬───────┬───────┬───────┐   ║
// ║   │       │  f1   │  f2   │  f3   │  f4   │  f5   │    │  f6   │  f7   │  f8   │  f9   │  f10  │       │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │       │  f11  │  f12  │  f13  │  f14  │  f15  │    │  f16  │  f17  │  f18  │  f19  │  f20  │       │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │       │  f21  │  f22  │  f23  │  f24  │       │    │       │       │       │       │       │       │   ║
// ║   └───────┴───────┴───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┴───────┴───────┘   ║
// ║                           │       │       │       │    │       │       │       │					        ║
// ║	    		           └───────┴───────┴───────┘    └───────┴───────┴───────┘                           ║
// ║																			                                ║
// ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

			bindings = <
				&none &kp F1  &kp F2  &kp F3  &kp F4  &kp F5     &kp F6  &kp F7  &kp F8  &kp F9  &kp F10 &none
				&none &kp F11 &kp F12 &kp F13 &kp F14 &kp F15    &kp F16 &kp F17 &kp F18 &kp F19 &kp F20 &none
				&none &kp F21 &kp F22 &kp F23 &kp F24 &none      &none   &none   &none   &none   &none   &none 
					                        &none &none &none    &none &none &none 
			>;
		};

		sys_settings_layer {
// DONE
// ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
// ║																		                                    ║
// ║   ┌───────┬───────┬───────┬───────┬───────┬───────┐    ┌───────┬───────┬───────┬───────┬───────┬───────┐   ║
// ║   │       │       │       │       │       │       │    │       │ BR_UP │       │ BR_DN │       │       │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │       │       │       │       │       │       │    │       │ VL_UP │ MUTE  │ VL_DN │       │       │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │       │       │       │       │       │       │    │       │  PRV  │  PP   │  NXT  │       │       │   ║
// ║   └───────┴───────┴───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┴───────┴───────┘   ║
// ║                           │       │       │  EXT  │    │       │       │       │					        ║
// ║ 	    	 	           └───────┴───────┴───────┘    └───────┴───────┴───────┘                           ║
// ║																		                                    ║
// ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

			bindings = <
				&none &none &none &none &none &none      &none &kp C_BRI_UP &none      &kp C_BRI_DN &none &none 
				&none &none &none &none &none &none      &none &kp C_VOL_UP &kp C_MUTE &kp C_VOL_DN &none &none 
				&none &none &none &none &none &none      &none &kp  C_PREV  &kp  C_PP  &kp  C_NEXT  &none &none
					              &none &none &tog 4     &none &none &none 
			>;
		};


		kb_settings_layer {
// DONE
// ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
// ║																		                                    ║
// ║   ┌───────┬───────┬───────┬───────┬───────┬───────┐    ┌───────┬───────┬───────┬───────┬───────┬───────┐   ║
// ║   │  CLR  │ SEL_1 │ SEL_2 │ SEL_3 │ SEL_4 │ SEL_5 │    │       │       │       │       │       │  SFT  │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │  NXT  │       │       │       │       │       │    │  USB  │       │       │       │       │  E_ON │   ║
// ║   ├───────┼───────┼───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┼───────┼───────┤   ║
// ║   │  PRV  │ DIS_1 │ DIS_2 │ DIS_3 │ DIS_4 │ DIS_5 │    │  BLE  │       │       │       │       │ E_OFF │   ║
// ║   └───────┴───────┴───────┼───────┼───────┼───────┤    ├───────┼───────┼───────┼───────┴───────┴───────┘   ║
// ║                           │       │       │  EXT  │    │       │       │       │				            ║
// ║ 	     		           └───────┴───────┴───────┘    └───────┴───────┴───────┘                           ║
// ║																									        ║
// ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

			bindings = <
				&bt BT_CLR &bt BT_SEL 0  &bt BT_SEL 1  &bt BT_SEL 2  &bt BT_SEL 3  &bt BT_SEL 4         &none        &none &none &none &none &soft_off
				&bt BT_NXT &soft_off     &none         &none         &none         &none                &out OUT_USB &none &none &none &none &ext_power EP_ON
				&bt BT_PRV &bt BT_DISC 0 &bt BT_DISC 1 &bt BT_DISC 2 &bt BT_DISC 3 &bt BT_DISC 4        &out OUT_BLE &none &none &none &none &ext_power EP_OFF
				                                                              &none &none &tog 5        &none &none &none
			>;
		};



	};
};
